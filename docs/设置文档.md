## 设置文档
### 常规设置  
- **编辑模式笔记记录阈值**：设置笔记在实时预览和源码模式下被记录的条件。  
  - **要求存在编辑操作**：需至少键入或删除任何内容（包括空格）  
  - **要求专注时长**：需在编辑模式或本插件的专注模式下停留超过1分钟  
  - **无需满足上述条件**：记录器将追踪所有在编辑模式下打开的文件  

- **退出编辑模式时的记录规则**：设置从编辑模式切换到阅读模式时的记录行为  
  - *注：编辑模式包含实时预览与源码模式*  
  - **仅记录当前笔记**：未手动记录时，其他笔记可能不会被自动追踪

- **快速参考**：直接从设置页面访问插件核心文档和字符串插值参考，方便配置记录器时快速查阅。

- **链接格式兼容**：新生成的链接现在遵循您的 Obsidian 链接格式设置（最短路径、相对路径或绝对路径），而不是始终使用仓库绝对路径。这确保了与您仓库链接管理偏好的一致性。
 
### 专注模式

当您编辑笔记时，您所做的编辑次数、修改内容、编辑时长等统计数据将被自动追踪。若您在插件设置的记录语法中指定了相关参数，这些数据将被记录。

自从[1.5.0版本](https://github.com/LeCheenaX/WordFlow-Tracker/releases/tag/1.5.0)起，本插件新增了专注模式，以追踪完善的时间数据。 

![Pasted image 20250706220031](https://github.com/user-attachments/assets/b3c568e2-f460-43d8-af8e-5ca35866bb2b)

在专注模式下，追踪器不仅会记录编辑模式的统计数据，还将记录您在阅读模式下浏览每条笔记的时长。主要囊括了：
1. 每条笔记的阅读时长
2. 每条笔记的编辑时长，以计算阅读+编辑的总时长
3. 记录编辑模式下的其他统计数据

> **注意**：专注模式下，当您在Obsidian中点击笔记区域外的侧边栏/功能栏/设置页等位置时，计时器**不会再中断**。非专注模式下，点击这些区域则会立即暂停计时。

**进入专注模式**，请点击小组件中的"播放"按钮。
  
**专注模式下**，长时间无操作将自动暂停计时器。您也可手动暂停计时器中断专注状态进行休息。 

![Pasted image 20250706221003](https://github.com/user-attachments/assets/5beb5412-2be1-4e9f-8b24-78c84a0b0131)

**点击"保存"按钮可退出专注模式**，退出后统计数据将自动记录。

![Pasted image 20250706221154](https://github.com/user-attachments/assets/669ba1f3-ff99-4d6b-b84d-3a8b072c324a)

- **闲置暂停后自动恢复**：启用此选项后，专注模式将在闲置暂停后自动恢复追踪，无需手动干预。这确保了即使在短暂中断或休息期间也能持续进行时间追踪。

### 本地化

WordFlow Tracker 现已支持完整的本地化，包括：
- 所有设置和配置选项
- 通知消息和提示
- 命令和界面元素
- 更新日志

当前支持的语言：
- 英语
- 简体中文

插件会自动检测您的 Obsidian 语言设置并显示相应的翻译。

### 记录器设置
- **创建新记录器**: 创建新记录器来额外记录需要的功能，常用情况如下：
	- 为不同的周期笔记创建: 假设当前记录器会记录编辑数据到日记中，你可以添加一个新记录器使编辑数据还能记录到每周笔记，或者每月笔记中。
 	- 为不同的记录数据创建: 假设当前记录器会在日记中记录你编辑过的每条笔记，并以表格形式呈现, 你可以添加一个新记录器使编辑数据会汇总并记录到 YAML(Frontmatter) 中.

    	![image](https://github.com/user-attachments/assets/56a03e3c-930c-4d0e-b901-a07e95099105)

- **重命名**: 重命名记录器以便区分。
- **删除**: 删除现在的记录器。

#### 基础设置
- **周期笔记文件夹 (Periodic note folder)**：设置每日笔记、周记等周期笔记的存放文件夹路径。需与以下插件配置保持完全一致:
	- Obsidian 原生「日记」插件
	- Templater 模板插件（若已安装）
- **开启动态周期笔记文件夹(Enable dynamic folder)**: 每日笔记、周记等周期笔记的存放文件夹将变为动态路径。 该路径需要使用 [moment 兼容格式](https://momentjs.com/docs/#/displaying/format/) 设置。 开启之后效果可见如下表格：

    | 周期笔记文件夹（开启动态文件夹）  | 对应Obsidian的文件夹 | 周期笔记格式 | 对应Obsidian的文件               |
	| ---------------------------------- | -------------------- | ------------- | --------------------------------- |
	| [Daily Notes/]YYYY-MM | Daily Notes/2025-03           | YYYY-MM-DD           | Daily Notes/2025-03/2025-03-21.md  |
	| [Monthly Notes/]YYYY  | Monthly Notes/2025            | MMM YYYY             | Monthly Notes/2025/Mar 2025.md     |
  
- **周期笔记格式 (Periodic note format)**：设置新创建的周期笔记（如日/周记）的文件名格式。需与以下插件配置保持完全一致:
	- Obsidian 原生「日记」插件
	- Templater 模板插件（若已安装）

#### 记录设置
- **记录内容类型 (Record content type)**：选择在周期笔记中插入内容的格式类型。当前支持:
	- 表格 (Table) : 以表格形式记录（⚠️ 使用表格时，modifiedNote 必须位于第一列）
	- 无序列表 (Bullet List) : 以列表形式记录
- **插入位置 (Insert to position)**：支持底部插入和自定义插入
	- ⚠️ 若选择「自定义位置」需满足: 起始标记 (start position) 和结束标记 (end position) 必须在周期笔记中存在且唯一
	- 确保创建新周期笔记时模板已正确应用这些标记
- **Wordflow 记录语法 (Wordflow recording syntax)**：通过字符串插值自定义记录内容，如使用 ${modifiedNote} 获取修改笔记的路径，或使用 [[${modifiedNote}]] 格式生成笔记链接。
- **预览记录语法**：在应用记录语法更改之前，可以预览结果的外观。这有助于验证配置并确保输出符合您的预期。
- **适配现有记录**：当您更改记录语法时，插件可以提示您将周期笔记中的现有记录适配为新格式。应用更改前会显示预览，让您完全掌控迁移过程。
- **自动清理已删除文件的记录**：启用后，插件将自动删除已从仓库中删除的文件的记录，保持周期笔记的整洁和最新。

#### 支持的字符串插值


| 字符串插值               | 描述                                               | 支持记录类型  | 示例                           | 备注                                                                                                                                                                                                     |
| ------------------- | ------------------------------------------------ | ------- | ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| ${modifiedNote}     | 修改后的笔记的笔记路径                                      | 表格、无序列表 | Daily Notes/2025-03-23.md    | 表格中始终应放在第一列，无序列表中应放在父元素中。                                                                                                                                                                              |
| ${noteTitle}        | 笔记的标题，不带如".md"的文件类型后缀                            | 表格、无序列表 | 2025-03-23, 未命名笔记, 新空白笔记0323 | 可以单独使用，也可以放在笔记链接中从而不显示笔记路径，而是笔记标题。放在**表格中**当链接使用时，仅支持如下格式： [[${modifiedNote}\\\|${noteTitle}]] （**注意分隔符'\|'之前有一个反斜杠**），放在**列表中**当链接使用时，仅支持如下格式： [[${modifiedNote}\|${noteTitle}]] （**注意分隔符'\|'之前没有反斜杠**） |
| ${editedTimes}      | 笔记在一段时间内的编辑次数(**注意与** ${editTime} **区分**)        | 表格、无序列表 | 100                          | 根据 Obsidian 规则，输入间隔小于0.5秒的所有输入被视为一次编辑。每次编辑都可以通过按 `ctrl` + `z` 撤销或者按 `ctrl` + `shift` + `z` 重做操作。                                                                                                       |
| ${editedWords}      | 笔记在一段时间内的编辑字数                                    | 表格、无序列表 | 550                          | 等于 addedWords + deletedWords                                                                                                                                                                           |
| ${changedWords}     | 笔记中字数的净变化                                        | 表格、无序列表 | 150                          | 等于 addedWords - deletedWords                                                                                                                                                                           |
| ${deletedWords}     | 笔记在一段时间内删除的字数                                    | 表格、无序列表 | 200                          |                                                                                                                                                                                                        |
| ${addedWords}       | 笔记在一段时间内添加的字数                                    | 表格、无序列表 | 350                          |                                                                                                                                                                                                        |
| ${docWords}         | 文档的总字数(截止上次记录)                                   | 表格、无序列表 | 1000                         | 包括 YAML（Frontmatter）中的字数，而 Obsidian 的字数统计核心插件不包括这部分。                                                                                                                                                   |
| ${editTime}         | 该笔记在编辑模式下所处的时间，长时间闲置将自动暂停。                       | 表格、无序列表 | 1 h 0 min, 6 min             | 闲置时，计时器会自动暂停，可以通过编辑笔记或者点击文档内容来刷新闲置时间 (**注意与** ${editedTimes} **区分**)                                                                                                                                   |
| ${readTime}         | 该笔记在阅读模式下所处的时间，长时间闲置将自动暂停。                       | 表格、无序列表 | 1 h 0 min, 6 min             | 阅读时间仅在专注模式下累积；闲置时，计时器会自动暂停，可以在侧栏组件点击继续按钮来继续计时                                                                                                                                                          |
| ${readEditTime}     | 该笔记被打开的时间(=阅读时间+编辑时间)，长时间闲置将自动暂停。                | 表格、无序列表 | 2 h 0 min, 12 min            | 其中阅读时间的部分仅在专注模式下累积；闲置时，计时器会自动暂停，可以在侧栏组件点击继续按钮来继续计时                                                                                                                                                     |
| ${editedPercentage} | 一段时间内编辑字数占总字数（编辑字数+原始字数）的比率，用于判断编辑是微调还是较大更改      | 表格、无序列表 | 55%                          | 内容是 HTML 格式，但样式会自动转为文字样式。（直接使用字符串因记录器更新字符串而导致准确性逐步降低而被弃用。）                                                                                                                                             |
| ${statBar}          | 以 HTML 格式展示原始字数、删除字数和添加字数的比例。用于判断编辑是否为微调还是还是较大更改 | 仅表格     | ![image](https://github.com/user-attachments/assets/c0d929a7-5ea8-4172-9d85-5de5f46e02bd)  | 自动转化样式为 SVG 比例条，颜色可以在 styles.css 中自定义。示例中的比例为 450:200:150。                                                                                                                                             |
| ${lastModifiedTime} | 笔记的最后修改时间，你可以在插件设置中指定此项目的格式                      | 表格、无序列表 | 2025-03-23 16:00             |                                                                                                                                                                                                        |
| ${comment}          | 给已经记录的数据添加任何你想要的备注                               | 表格、无序列表 | 已写完该笔记                       | 插件不会修改，只会留空给用户，备注什么都可以。                                                                                                                                                                                |
| ${totalEdits}       | 所有笔记在一段时间内的总编辑次数                                 | 元数据     | 200                          | 可供其他插件使用，例如生成热力图。                                                                                                                                                                                      |
| ${totalWords}       | 所有笔记在一段时间内的总编辑字数                                 | 元数据     | 2000                         | 可供其他插件使用，例如生成热力图。                                                                                                                                                                                      |
| ${totalEditTime}    | 所有笔记的总编辑时间.                                      | 元数据     | 1 h 13 min                   | 可供其他插件使用，例如生成热力图                                                                                                                                                                                       |
| ${totalReadTime}    | 所有笔记的总阅读时间.                                      | 元数据     | 1 h 20 min                   | 阅读时间仅在专注模式下累积；可供其他插件使用，例如生成热力图                                                                                                                                                                         |
| ${totalTime}        | 所有笔记的阅读时间与编辑时间之和.                                | 元数据     | 2 h 33 min                   | 其中阅读时间部分仅在专注模式下累积；可供其他插件使用，例如生成热力图                                                                                                                                                                     |
### 侧栏组件

侧栏组件提供三种视图模式，您可以使用顶部的视图切换按钮在它们之间切换：

#### 视图模式

1. **文件列表视图**：显示所有已编辑文件及其各自的统计数据
2. **标签列表视图**：按标签对文件进行分组，支持可折叠部分和分层进度条
3. **热力图视图**：以可视化日历形式展示您的生产力（仅适用于日记记录器）

#### 组件设置

- **打开时的默认视图**：选择组件打开时显示的视图模式（文件列表、标签列表或热力图）

- **字段别名**：自定义字段名称在组件中的显示方式
  - 为技术字段名称创建更易读的标签
  - 支持多语言
  - 通过个性化术语提升组件可用性

#### 随机颜色生成

这些设置控制如何为未配置基于标签颜色的文件自动生成颜色。颜色使用 HSL（色相、饱和度、亮度）颜色模型生成。

- **随机颜色组亮度**：控制生成颜色的亮度（0-100）
  - 较低值（如 30-50）：较暗的颜色，更适合浅色主题
  - 中等值（如 50-70）：平衡的颜色，适用于大多数主题
  - 较高值（如 70-90）：较亮的颜色，更适合深色主题
  - 默认值：66
  - 推荐示例：
    - 深色主题：65-75
    - 浅色主题：40-55
    - 高对比度：30 或 80

- **随机颜色组饱和度**：控制颜色强度（0-100）
  - 您可以指定多个用空格分隔的值来创建颜色变化
  - 较低值（如 20-40）：柔和的粉彩色
  - 中等值（如 50-70）：平衡的自然色
  - 较高值（如 80-100）：鲜艳的强烈色
  - 默认值：60 85
  - 推荐示例：
    - 柔和色板：30 45
    - 平衡色板：60 85（默认）
    - 鲜艳色板：75 90
    - 多样化色板：40 60 80

工作原理：插件随机选择色相值（0-360°），并从您的列表中为每个文件选择一个饱和度值，在保持一致亮度的同时创建视觉上不同的颜色。多个饱和度值有助于区分色相相似的文件。

注意：更改在刷新组件或重新加载插件后生效。

#### 热力图视图（仅限日记记录器）

热力图视图以可视化日历形式展示您的生产力：

- **自定义颜色和渐变**：配置颜色方案和渐变级别以匹配您的偏好
- **动态阈值**：根据您的实际数据分布自动调整渐变级别，确保笔记分布在所有视觉级别上以获得更好的层次结构
- **交互式导航**：
  - 点击图例打开笔记
  - Ctrl+点击在新标签页中打开
  - Ctrl+悬停预览笔记内容
- **日期导航面板**：
  - 默认隐藏，将鼠标悬停在组件中的日期上即可显示
  - 显示上下文标签："今天"、"昨天"、"本周"、"上周"等
  - 使用直观的控件浏览您的历史记录

#### 基于标签的颜色

配置特定标签的自定义颜色以覆盖随机颜色生成：

- **为标签配置颜色**：根据文件标签为其分配特定颜色
  - 兼容文件视图和标签视图
  - 具有多个标签的文件将混合颜色
  - 具有相同标签的不同文件将通过饱和度变化自动区分
  - 支持为标签组自定义组标签（可选）
  - 最多允许 10 个标签颜色配置

当配置了基于标签的颜色时，这些文件将使用分配的颜色。未配置标签的文件将使用上述随机颜色生成设置。